---
keywords: "version representations, version vector, frontiers, CRDT, synchronization"
description: "Understanding and choosing between Version Vectors and Frontiers in Loro"
---

# Version Representations

Loro provides two ways to represent document versions: **Version Vectors** and **Frontiers**. Each serves different purposes in distributed collaboration.

## Quick Overview

```ts twoslash
import { LoroDoc } from "loro-crdt";

const doc = new LoroDoc();
const versionVector = doc.version();      // { "peer1": 5, "peer2": 3, ... }
const frontiers = doc.frontiers();        // [{ peer: "...", counter: ... }]
```

## Comparison Table

| Aspect | Version Vectors | Frontiers |
|--------|----------------|-----------|
| **Structure** | Map of peer â†’ operation count | List of boundary operations |
| **Size** | Grows with number of peers | Usually 1-2 elements |
| **Best for** | Synchronization, diffing | Checkpoints, storage |
| **Compare versions** | Direct comparison | Requires DAG context |
| **Network protocols** | Widely supported | Custom handling |
| **Storage efficiency** | Lower with many peers | Always compact |

## Version Vectors

Track exactly how many operations each peer has contributed:

```ts twoslash
import { LoroDoc } from "loro-crdt";

const alice = new LoroDoc();
alice.setPeerId(1n);
const bob = new LoroDoc();
bob.setPeerId(2n);

// Make edits
alice.getText("doc").insert(0, "Hello");
bob.getText("doc").insert(0, "Hi");

// Merge
alice.import(bob.export({ mode: "snapshot" }));

console.log(alice.version());
// { "1": 1, "2": 1 } - one operation from each peer
```

**Use Version Vectors for:**
- Synchronization between peers
- Calculating missing operations
- Network protocols
- Conflict detection

## Frontiers

Identify boundary operations that implicitly include all ancestors:

```ts twoslash
import { LoroDoc } from "loro-crdt";

const doc = new LoroDoc();
doc.getText("content").insert(0, "Hello");

console.log(doc.frontiers());
// [{ peer: "...", counter: 0 }] - just one element!
```

**Use Frontiers for:**
- Creating checkpoints
- Time travel/history navigation
- Efficient storage
- Recording milestones

## Decision Guide

### Choose Version Vectors When:

```ts twoslash
import { LoroDoc } from "loro-crdt";

// Synchronization scenario
class SyncManager {
  syncDocs(local: LoroDoc, remote: LoroDoc) {
    // VV makes it easy to get only missing updates
    const localVV = local.version();
    const remoteVV = remote.version();
    
    local.import(remote.export({ mode: "update", from: localVV }));
    remote.import(local.export({ mode: "update", from: remoteVV }));
  }
}
```

### Choose Frontiers When:

```ts twoslash
import { LoroDoc } from "loro-crdt";

// Checkpoint scenario
class DocumentCheckpoints {
  private checkpoints = new Map<string, any>();
  
  save(doc: LoroDoc, name: string) {
    // Frontiers are compact for storage
    this.checkpoints.set(name, doc.frontiers());
  }
  
  restore(doc: LoroDoc, name: string) {
    const frontiers = this.checkpoints.get(name);
    if (frontiers) doc.checkout(frontiers);
  }
}
```

## Conversion Between Formats

Convert seamlessly when the version exists in history:

```ts twoslash
import { LoroDoc } from "loro-crdt";

const doc = new LoroDoc();
doc.getText("content").insert(0, "Hello");

const vv = doc.version();
const frontiers = doc.frontiers();

// Convert between formats
const vvFromFrontiers = doc.frontiersToVV(frontiers);
const frontiersFromVV = doc.vvToFrontiers(vv);

console.log(JSON.stringify(vv) === JSON.stringify(vvFromFrontiers)); // true
```

## Practical Strategy

```ts twoslash
import { LoroDoc } from "loro-crdt";

const doc = new LoroDoc();

// Use VV for synchronization
const syncData = doc.export({ 
  mode: "update", 
  from: doc.version()  // Version Vector for diffing
});

// Use Frontiers for storage
const checkpoint = {
  frontiers: doc.frontiers(),  // Compact for storage
  timestamp: Date.now()
};
```

## Summary

- **Version Vectors**: Complete peer state, ideal for synchronization and diffing
- **Frontiers**: Compact boundaries, perfect for storage and checkpoints
- **Both are convertible**: Use the right tool for each task

## Related Topics

- [Frontiers Concept](/docs/concepts/frontiers) - Focused guide on Frontiers
- [Version Tutorial](/docs/tutorial/version) - Basic version concepts
- [Version Deep Dive](/docs/advanced/version_deep_dive) - Technical details and DAG structure