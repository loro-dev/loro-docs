import { getPagesUnderRoute } from "nextra/context";
import Link from "next/link";
import BlogPostCard from "../components/BlogPostCard";

export function BlogHeader() {
  return (
    <div className="max-w-screen-lg mx-auto pt-4 pb-8 mb-16 border-b border-gray-400 border-opacity-20 text-center">
      <h1>
        <span className="font-bold leading-tight lg:text-5xl">Loro Blog</span>
      </h1>
      <p className="text-center text-gray-500 dark:text-gray-400 font-space-grotesk"></p>
      <div className="mt-4">
        <Link
          href="/blog.xml"
          className="text-sm font-semibold text-primary-600 hover:text-primary-500 dark:text-primary-400"
        >
          Subscribe via RSS
        </Link>
      </div>
    </div>
  );
}

export function BlogIndex() {
  const pages = getPagesUnderRoute("/blog");
  pages.sort((a, b) => {
    if (a.frontMatter?.date && b.frontMatter?.date) {
      return new Date(b.frontMatter.date) - new Date(a.frontMatter.date);
    }
  });

  return pages.map((page) => (
    <BlogPostCard key={page.route} page={page} />
  ));
}

<BlogHeader />
<BlogIndex />
